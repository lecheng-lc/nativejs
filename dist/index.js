var _a,_b,UA=window.navigator.userAgent,appType="Nokey",regex=new RegExp("".concat(appType,"/\\d{1}\\.\\d{1,2}\\.\\d{1,2}"),"ig"),matchResult=null==(_b=null==(_a=UA.match(regex))?void 0:_a[0])?void 0:_b.split("/"),isAndroid=-1<UA.indexOf("Android")||-1<UA.indexOf("Adr"),appInfo={appName:(null==matchResult?void 0:matchResult[0])||"Nokey",version:(null==matchResult?void 0:matchResult[1])||"1.0.0",system:isAndroid?"android":"ios",isAppWebview:!(null==matchResult||!matchResult.length)},successStatus=200;function isStr(e){return"string"==typeof e}function compareVersion(e,o){if(isStr(e)||isStr(o))return new Error("请传入正确的字符串");for(var n=e.split("."),t=o.split("."),a=Math.max(n.length,t.length),r=0;r<a;){var i=Number(n[r]),c=Number(t[r]);if(r++,c<i)return!0;if(i<c)return!1}return!0}function getQueryParams(o){var n=[];return Object.keys(o).forEach(function(e){n.push("".concat(e,"=").concat(o[e]))}),n.join("&")}function dealCallBackName(e){var o=e;return function(e){e.code!==successStatus&&console.error(e.message),o(e.data)}}function osProxy(e,o){o=compareVersion(appInfo.version,o);appInfo.isAppWebview?o&&e():console.warn("暂不支持")}var VOIDFN=function(e){},BRIDGE_PREFIX=window.ingeekJSApi,NativeBridge=function(){function e(){BRIDGE_PREFIX&&Object.keys(BRIDGE_PREFIX).length&&BRIDGE_PREFIX.ready(function(){})}return e.prototype.gotoPage=function(e,o){var n=dealCallBackName(o=void 0===o?VOIDFN:o);console.log(BRIDGE_PREFIX),osProxy(function(){BRIDGE_PREFIX.common.gotoPage(e,n)},"2.9.0")},e.prototype.getSystemInfo=function(e,o){var n=dealCallBackName(o=void 0===o?VOIDFN:o);osProxy(function(){BRIDGE_PREFIX.common.handleEvent(e,n)},"2.9.0")},e.prototype.closeWindow=function(e,o){var n=dealCallBackName(o=void 0===o?VOIDFN:o);osProxy(function(){BRIDGE_PREFIX.common.closeWindow(e,n)},"1.0.0")},e.prototype.doShare=function(e,o){var n=dealCallBackName(o=void 0===o?VOIDFN:o);osProxy(function(){BRIDGE_PREFIX.common.handleEvent(e,n)},"3.0.0")},e.prototype.setNativeHeader=function(e,o){var n=dealCallBackName(o=void 0===o?VOIDFN:o),o=getQueryParams(e),t={url:"app://event/setNativeHeader?".concat(o)};console.log(t),osProxy(function(){BRIDGE_PREFIX.common.handleEvent(t,n)},"3.0.0")},e.prototype.compareVersion=function(e,o){return compareVersion(e,o)},e}(),index=(window.bridgeApi=new NativeBridge,window.bridgeApi);export{index as default};
